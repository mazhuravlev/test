(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(t,e,n){t.exports=n(593)},168:function(t,e,n){},169:function(t,e,n){},593:function(t,e,n){"use strict";n.r(e);var i=n(48),o=n.n(i),s=n(159),a=n.n(s),r=(n(168),n(161)),c=n(160),h=n(162),u=n(63),l=n(64),v=(n(169),n(101)),f=function(){function t(e,n){Object(u.a)(this,t),this.x=e,this.y=n}return Object(l.a)(t,[{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"substract",value:function(e){return new t(this.x-e.x,this.y-e.y)}},{key:"divide",value:function(e){return new t(this.x/e,this.y/e)}},{key:"multiply",value:function(e){return new t(this.x*e,this.y*e)}},{key:"rotate",value:function(e){var n=this.x,i=this.y,o=Math.sin(e),s=Math.cos(e);return new t(n*s-i*o,n*o+i*s)}},{key:"normalize",value:function(){return this.divide(this.length)}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}}]),t}(),y=function(){function t(e){Object(u.a)(this,t),this.mass=e,this.position=new f(0,0),this.velocity=new f(0,0),this.forces=[]}return Object(l.a)(t,[{key:"setPosition",value:function(t){this.position=t}},{key:"setVelocity",value:function(t){this.velocity=t}},{key:"getForces",value:function(){return this.forces}},{key:"getVelocity",value:function(){return this.velocity}},{key:"getPosition",value:function(){return this.position}},{key:"applyForce",value:function(t){this.forces.push(t)}},{key:"update",value:function(t){var e=this.resultingForce.divide(this.mass);this.velocity=e.multiply(t).add(this.velocity),this.position=this.velocity.multiply(t).add(this.position),this.forces=[]}},{key:"resultingForce",get:function(){return this.forces.reduce(function(t,e){return t.add(e)},new f(0,0))}}]),t}(),d=function(){function t(e){var n=this;Object(u.a)(this,t),this.canvas=e,this.ctx=void 0,this.onClick=void 0,this.canvasBBox=void 0,this.offset=0;var i=e.getContext("2d");if(!i)throw new Error;this.ctx=i,this.canvasBBox=e.getBoundingClientRect(),e.onclick=function(t){if(n.onClick){var e=n.fromCanvas(new f(t.clientX-n.canvasBBox.left+n.offset,t.clientY-n.canvasBBox.top));n.onClick(e)}}}return Object(l.a)(t,[{key:"clear",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"renderTerrain",value:function(t){var e=this.ctx;e.beginPath(),e.moveTo(0,0);for(var n=0;n<this.canvas.width;n+=6)e.lineTo(n,this.canvas.height-t.eval({x:n+this.offset}));e.stroke()}},{key:"renderObj",value:function(t){var e=this.ctx,n=this.toCanvas(t.getPosition()).substract(new f(this.offset,0));e.beginPath(),e.arc(n.x,n.y,6,0,2*Math.PI),e.stroke(),e.beginPath();var i=e.strokeStyle;e.strokeStyle="#0000aa",t.getForces().forEach(function(t){e.moveTo(n.x,n.y),e.lineTo(n.x+3e4*t.x,n.y-3e4*t.y)}),e.stroke(),e.beginPath(),e.strokeStyle="#dd2311";var o=t.resultingForce;e.moveTo(n.x,n.y),e.lineTo(n.x+3e4*o.x,n.y-3e4*o.y),e.stroke(),e.strokeStyle=i;var s=this.canvas.width/2-n.x,a=s*s/1e4;n.x>this.canvas.width/2?this.offset+=a:this.offset-=a}},{key:"fromCanvas",value:function(t){return new f(t.x,this.canvas.height-t.y)}},{key:"toCanvas",value:function(t){return new f(t.x,this.canvas.height-t.y)}}]),t}(),k=function(t){return new f(0,-98e-6*t)},w=v.compile("sin(x/30) * 30 + 100"),x=v.derivative("sin(x/30) * 30 + 100","x"),g=function(t){function e(){var t,n;Object(u.a)(this,e);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(n=Object(r.a)(this,(t=Object(c.a)(e)).call.apply(t,[this].concat(s)))).cRef=o.a.createRef(),n.keyDown=!1,n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=new y(10);if(e.setPosition(new f(450,150)),this.cRef.current){var n=new d(this.cRef.current);document.addEventListener("keydown",function(e){switch(e.keyCode){case 32:t.keyDown=!0;break;case 37:n.offset-=10;break;case 39:n.offset+=10;break;default:console.log(e.keyCode)}}),document.addEventListener("keyup",function(e){switch(e.keyCode){case 32:t.keyDown=!1}}),n.onClick=function(t){e.setPosition(t),e.setVelocity(new f(0,0))};var i=0,o=!1;requestAnimationFrame(function s(a){var r=e.getPosition(),c=w.eval({x:r.x});if(r.y-c<3){var h=x.eval({x:r.x}),u=Math.atan(h),l=k(e.mass).multiply(Math.cos(u)*e.getVelocity().length*100).rotate(u-Math.PI);o||(e.getVelocity(),o=!0),e.applyForce(l)}else o=!1;if(t.keyDown&&e.applyForce(k(e.mass)),e.applyForce(k(e.mass)),n.clear(),n.renderObj(e),n.renderTerrain(w),i){var v=a-i;e.update(v)}i=a,requestAnimationFrame(s)})}}},{key:"render",value:function(){return o.a.createElement("canvas",{ref:this.cRef,width:"900",height:"900"})}}]),e}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[163,1,2]]]);
//# sourceMappingURL=main.7ab9ca27.chunk.js.map