(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(e,t,n){e.exports=n(593)},168:function(e,t,n){},169:function(e,t,n){},593:function(e,t,n){"use strict";n.r(t);var i=n(21),o=n.n(i),a=n(159),s=n.n(a),r=(n(168),n(161)),c=n(160),u=n(162),h=n(63),l=n(64),f=(n(169),n(101)),v=function(){function e(t,n){Object(h.a)(this,e),this.x=t,this.y=n}return Object(l.a)(e,[{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"substract",value:function(t){return new e(this.x-t.x,this.y-t.y)}},{key:"divide",value:function(t){return new e(this.x/t,this.y/t)}},{key:"multiply",value:function(t){return new e(this.x*t,this.y*t)}},{key:"rotate",value:function(t){var n=this.x,i=this.y,o=Math.sin(t),a=Math.cos(t);return new e(n*a-i*o,n*o+i*a)}},{key:"normalize",value:function(){return this.divide(this.length)}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}}]),e}(),y=function(){function e(t){Object(h.a)(this,e),this.mass=t,this.position=new v(0,0),this.velocity=new v(0,0),this.forces=[]}return Object(l.a)(e,[{key:"setPosition",value:function(e){this.position=e}},{key:"setVelocity",value:function(e){this.velocity=e}},{key:"getForces",value:function(){return this.forces}},{key:"getVelocity",value:function(){return this.velocity}},{key:"getPosition",value:function(){return this.position}},{key:"applyForce",value:function(e){this.forces.push(e)}},{key:"update",value:function(e){var t=this.resultingForce.divide(this.mass);this.velocity=t.multiply(e).add(this.velocity),this.position=this.velocity.multiply(e).add(this.position),this.forces=[]}},{key:"resultingForce",get:function(){return this.forces.reduce(function(e,t){return e.add(t)},new v(0,0))}}]),e}(),d=function(){function e(t){var n=this;Object(h.a)(this,e),this.canvas=t,this.ctx=void 0,this.onClick=void 0,this.canvasBBox=void 0,this.offset=0;var i=t.getContext("2d");if(!i)throw new Error;this.ctx=i,this.canvasBBox=t.getBoundingClientRect(),t.onclick=function(e){if(n.onClick){var t=n.fromCanvas(new v(e.clientX-n.canvasBBox.left+n.offset,e.clientY-n.canvasBBox.top));n.onClick(t)}}}return Object(l.a)(e,[{key:"clear",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"renderTerrain",value:function(e){var t=this.ctx;t.beginPath(),t.moveTo(0,0);for(var n=0;n<this.canvas.width;n+=6)t.lineTo(n,this.canvas.height-e.eval({x:n+this.offset}));t.stroke()}},{key:"renderObj",value:function(e){var t=this.ctx,n=this.toCanvas(e.getPosition()).substract(new v(this.offset,0));t.beginPath(),t.arc(n.x,n.y,6,0,2*Math.PI),t.stroke(),t.beginPath();var i=t.strokeStyle;t.strokeStyle="#0000aa",e.getForces().forEach(function(e){t.moveTo(n.x,n.y),t.lineTo(n.x+3e4*e.x,n.y-3e4*e.y)}),t.stroke(),t.beginPath(),t.strokeStyle="#dd2311";var o=e.resultingForce;t.moveTo(n.x,n.y),t.lineTo(n.x+3e4*o.x,n.y-3e4*o.y),t.stroke(),t.strokeStyle=i;var a=this.canvas.width/2-n.x,s=a*a/1e4;n.x>this.canvas.width/2?this.offset+=s:this.offset-=s}},{key:"fromCanvas",value:function(e){return new v(e.x,this.canvas.height-e.y)}},{key:"toCanvas",value:function(e){return new v(e.x,this.canvas.height-e.y)}}]),e}(),k=function(e){return new v(0,-98e-6*e)},w=f.compile("sin(x/30) * 30 + 100"),m=f.derivative("sin(x/30) * 30 + 100","x"),x=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(r.a)(this,Object(c.a)(t).call(this,e))).cRef=o.a.createRef(),n.keyDown=!1,n.renderScore=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,Math.round(n.state.offset/10)),o.a.createElement("div",null,"\u043d\u0443 \u0432\u0441\u0435, \u043f\u0440\u043e\u0438\u0433\u0440\u0430\u043b"))},n.state={offset:0},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new y(10);if(t.setPosition(new v(450,450)),this.cRef.current){var n=new d(this.cRef.current);document.addEventListener("keydown",function(t){switch(t.keyCode){case 32:e.keyDown=!0;break;case 37:n.offset-=10;break;case 39:n.offset+=10;break;default:console.log(t.keyCode)}}),document.addEventListener("keyup",function(t){switch(t.keyCode){case 32:e.keyDown=!1}}),n.onClick=function(e){t.setPosition(e),t.setVelocity(new v(0,0))};var i=0,o=!1;requestAnimationFrame(function a(s){var r=t.getPosition(),c=w.eval({x:r.x});if(r.y-c<3){var u=m.eval({x:r.x}),h=Math.atan(u),l=k(t.mass).multiply(Math.cos(h)*t.getVelocity().length*100).rotate(h-Math.PI);o||(t.getVelocity(),o=!0),t.applyForce(l)}else o=!1;if(e.keyDown&&t.applyForce(k(t.mass)),t.applyForce(k(t.mass)),n.clear(),n.renderObj(t),n.renderTerrain(w),i){var f=s-i;t.update(f)}i=s,e.setState({offset:n.offset}),requestAnimationFrame(a)})}}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"score"},this.renderScore()),o.a.createElement("canvas",{ref:this.cRef,width:"900",height:"900"}))}}]),t}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[163,1,2]]]);
//# sourceMappingURL=main.9a93cf09.chunk.js.map